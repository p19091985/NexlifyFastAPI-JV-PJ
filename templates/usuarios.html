{% extends "_base.html" %}
{% block title %}Gest√£o de Usu√°rios{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>üë§ Gest√£o de Usu√°rios</h1>
    <span class="htmx-indicator spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
</div>
<p>Crie, edite ou remova usu√°rios do sistema.</p>
{% if db_disabled %}
<div class="alert alert-warning">
    Funcionalidade indispon√≠vel: O banco de dados est√° desabilitado. 
</div>
{% else %}
<div class="card" x-data>
    <div class="card-header">
        <button class="btn btn-primary"
                hx-get="/usuarios/novo"
                hx-target="#form-container"
                hx-swap="innerHTML">
            ‚ûï Adicionar Novo Usu√°rio
        </button>
    </div>
    <div class="card-body">
        <div id="form-container" class="mb-4"></div>
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead>
                    <tr>
                        <th>Login (ID)</th>
                        <th>Nome Completo</th>
                        <th>Perfil de Acesso</th>
                        <th class="text-end">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="usuarios-tabela-corpo">
                    {% for usuario in usuarios %}
                        {% include "partials/_usuario_row.html" %}
                    {% else %}
                        <tr id="usuarios-empty-row">
                            <td colspan="4" class="text-center text-muted">Nenhum usu√°rio cadastrado. </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}